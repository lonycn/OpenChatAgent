# 📦 chat-admin 模块开发 TODO

> **模块职责**：客服管理后台，提供人工客服接管界面和会话管理功能

## 🎯 MVP 核心任务（第 3 周）

### 🔥 P0 - 基础管理界面

- [ ] **项目初始化**

  - [ ] 创建 `chat-admin/` 目录结构
  - [ ] 初始化 React 项目 (基于 ant-design-pro)
  - [ ] 安装依赖 `antd`, `@ant-design/pro-components`, `axios`
  - [ ] 配置开发环境和代理

- [ ] **登录和权限系统**

  - [ ] 实现客服登录页面
  - [ ] 实现简单的 JWT 认证
  - [ ] 添加路由权限控制
  - [ ] 实现客服角色管理 (基础版)

- [ ] **会话列表页面**
  - [ ] 实现活跃会话列表展示
  - [ ] 显示会话基本信息 (用户 ID、状态、时间)
  - [ ] 添加会话状态筛选 (全部/AI 接待/人工接待)
  - [ ] 实现会话搜索功能

### 🟡 P1 - 核心客服功能

- [ ] **会话接管功能**

  - [ ] 实现"接管会话"按钮和逻辑
  - [ ] 显示当前接待者状态
  - [ ] 实现接管状态切换 (AI ↔ 人工)
  - [ ] 添加接管操作确认提示

- [ ] **会话详情页面**

  - [ ] 实现会话详情查看页面
  - [ ] 显示完整的对话历史
  - [ ] 区分消息来源 (用户/AI/人工/系统)
  - [ ] 添加消息时间戳和状态

- [ ] **实时消息处理**
  - [ ] 集成 WebSocket 接收实时消息
  - [ ] 实现新消息提醒和通知
  - [ ] 支持客服直接回复消息
  - [ ] 添加消息发送状态反馈

### 🔥 P0 - 基础数据展示

- [ ] **统计面板**

  - [ ] 显示当前活跃会话数量
  - [ ] 显示 AI/人工接待比例
  - [ ] 显示今日消息统计
  - [ ] 添加基础图表展示

- [ ] **客服工作台**
  - [ ] 实现客服在线状态管理
  - [ ] 显示客服当前处理的会话
  - [ ] 添加快速操作按钮
  - [ ] 实现会话分配逻辑 (简单版)

## 🚀 扩展功能（后续版本）

### 🟢 P2 - 高级功能

- [ ] **知识库管理**

  - [ ] 实现知识库文档上传
  - [ ] 支持知识库内容编辑
  - [ ] 添加知识库搜索和预览
  - [ ] 实现知识库版本管理

- [ ] **客服绩效统计**

  - [ ] 客服工作量统计
  - [ ] 响应时间分析
  - [ ] 客户满意度统计
  - [ ] 生成工作报表

- [ ] **高级管理功能**
  - [ ] 客服排班管理
  - [ ] 会话自动分配规则
  - [ ] 客服技能标签管理
  - [ ] 系统配置管理

## 📁 目录结构

```
chat-admin/
├── src/
│   ├── pages/
│   │   ├── Dashboard/
│   │   │   └── index.jsx
│   │   ├── Sessions/
│   │   │   ├── List.jsx
│   │   │   └── Detail.jsx
│   │   ├── Login/
│   │   │   └── index.jsx
│   │   └── User/
│   │       └── Settings.jsx
│   ├── components/
│   │   ├── Chat/
│   │   │   ├── MessageList.jsx
│   │   │   └── MessageInput.jsx
│   │   ├── Session/
│   │   │   ├── SessionCard.jsx
│   │   │   └── StatusBadge.jsx
│   │   └── Common/
│   │       ├── Layout.jsx
│   │       └── Loading.jsx
│   ├── services/
│   │   ├── api.js
│   │   ├── websocket.js
│   │   └── auth.js
│   ├── utils/
│   │   ├── constants.js
│   │   ├── helpers.js
│   │   └── request.js
│   ├── hooks/
│   │   ├── useAuth.js
│   │   ├── useWebSocket.js
│   │   └── useSessions.js
│   ├── App.jsx
│   └── main.jsx
├── public/
├── tests/
└── package.json
```

## 🔧 技术要求

- **框架**: React 18 + Vite
- **UI 库**: Ant Design + Pro Components
- **状态管理**: React Query + Zustand
- **路由**: React Router v6
- **HTTP 客户端**: axios
- **WebSocket**: 原生 WebSocket API
- **图表**: @ant-design/charts
- **测试框架**: Vitest + React Testing Library

## 📋 验收标准

- [ ] 客服能够成功登录并访问管理界面
- [ ] 能够查看和管理所有活跃会话
- [ ] 支持会话接管和状态切换功能
- [ ] 实时接收和处理新消息
- [ ] 界面响应式且用户体验良好
- [ ] 具备基础的权限控制和安全防护

## 🔗 依赖关系

- **依赖**: `chat-core` 模块 (REST API + WebSocket)
- **被依赖**: 无 (管理后台应用)
- **外部服务**: chat-core 服务

## 🎨 UI/UX 设计要求

### 主要页面布局

1. **侧边导航**: 会话列表、统计面板、设置
2. **顶部导航**: 用户信息、通知、退出
3. **主内容区**: 根据导航显示不同内容
4. **右侧面板**: 会话详情、快速操作

### 交互设计

1. **会话列表**: 支持筛选、搜索、分页
2. **实时更新**: 新消息高亮、状态实时同步
3. **操作反馈**: 加载状态、成功/失败提示
4. **响应式**: 适配不同屏幕尺寸

## 🚨 关键注意事项

1. **实时性**: 确保消息和状态的实时同步
2. **性能**: 大量会话时的列表渲染优化
3. **安全性**: 客服权限控制和数据保护
4. **易用性**: 简化客服操作流程，提高效率

## 🔄 开发优先级

### 第一阶段 (MVP)

1. 基础登录和会话列表
2. 会话接管功能
3. 简单的消息查看

### 第二阶段 (增强)

1. 实时消息处理
2. 统计面板
3. 客服工作台优化

### 第三阶段 (完善)

1. 知识库管理
2. 高级统计功能
3. 系统配置管理

## 📊 数据需求

### 会话数据

- 会话 ID、用户 ID、创建时间
- 当前状态、接待者信息
- 消息数量、最后活跃时间

### 客服数据

- 客服 ID、姓名、状态
- 当前处理会话数
- 工作统计数据

### 统计数据

- 实时会话统计
- 历史数据趋势
- 客服绩效指标
