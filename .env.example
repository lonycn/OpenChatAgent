# ====================================
# OpenChatAgent 统一环境配置文件
# ====================================

# ====================
# 全局配置
# ====================
NODE_ENV=development
LOG_LEVEL=info

# ====================
# 端口配置 (800x 系列统一管理)
# ====================
CHAT_UI_PORT=8001
CHAT_CORE_PORT=8002
AI_SERVICE_PORT=8003
CHAT_SESSION_PORT=8004
CHAT_ADMIN_PORT=8005
CHAT_ADMIN_UI_PORT=8006

# ====================
# chat-core 消息网关配置
# ====================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8001,http://localhost:8006

# 服务间通信配置
AI_SERVICE_URL=http://localhost:8003
SESSION_SERVICE_URL=http://localhost:8004
CHAT_SESSION_REDIS_URL=redis://localhost:6379

# ====================
# chat-ui 前端配置
# ====================
VITE_CHAT_CORE_WS_URL=ws://localhost:8002
VITE_CHAT_CORE_API_URL=http://localhost:8002/api

# ====================
# ai-service 阿里百炼配置
# ====================
DASHSCOPE_API_KEY=sk-your_api_key_here
KNOWLEDGE_BASE_CONFIGS=[{"id":"kb1","name":"FAQ知识库","priority":1},{"id":"kb2","name":"产品规格库","priority":2}]
MAX_CONTEXT_MESSAGES=10
RETRY_DELAY_MS=1000
DEFAULT_MODEL=qwen-plus

# ====================
# chat-session Redis会话配置
# ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 会话配置
DEFAULT_SESSION_TTL=86400  # 24小时 (秒)
MAX_MESSAGE_HISTORY=100    # 最大消息历史数量
CLEANUP_INTERVAL=3600      # 清理间隔 (秒)

# 性能配置
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000     # 重试延迟 (毫秒)

# ====================
# chat-admin 管理后台配置  
# ====================
# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_NAME=chat_admin
DB_USER=root
DB_PASSWORD=your_db_password
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00

# JWT配置
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# 密码加密
BCRYPT_ROUNDS=10

# CORS配置
CORS_ORIGIN=http://localhost:8006,http://localhost:8002

# ====================
# 日志管理配置
# ====================
# 日志级别: debug, info, warn, error
LOG_LEVEL=info
# 日志保留天数
LOG_RETENTION_DAYS=30
# 日志目录
LOG_DIR=./logs
# 是否启用控制台日志
LOG_CONSOLE=true
# 是否启用文件日志
LOG_FILE=true

# ====================
# 开发环境配置
# ====================
# 是否启用热重载
DEV_HOT_RELOAD=true
# 并发启动延迟（避免端口冲突）
STARTUP_DELAY_MS=2000 